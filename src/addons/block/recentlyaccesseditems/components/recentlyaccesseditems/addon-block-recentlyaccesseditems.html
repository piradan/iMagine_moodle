<ion-card>
    <core-loading [hideUntil]="loaded">
        <!-- Badges Section -->
        <ion-item-divider>
            <ion-label>
                <h2 class="section-title">{{ 'addon.block_recentlyaccesseditems.viewbadges' | translate }}</h2>
            </ion-label>
        </ion-item-divider>
        <ion-item class="ion-text-wrap" *ngFor="let badge of badges">
            <ion-avatar slot="start">
                <img [src]="badge.badgeurl" [alt]="badge.name" core-external-content>
            </ion-avatar>
            <ion-label>
                <h3>{{badge.name}}</h3>
                <p>{{badge.dateissued | date:'medium'}}</p>
            </ion-label>
        </ion-item>
        <ion-item *ngIf="badges.length === 0">
            <ion-label>
                <p>{{ 'addon.block_recentlyaccesseditems.nobadges' | translate }}</p>
            </ion-label>
        </ion-item>

        <!-- Certificates Section -->
        <ion-item-divider>
            <ion-label>
                <h2 class="section-title">{{ 'addon.block_recentlyaccesseditems.viewcertificates' | translate }}</h2>
            </ion-label>
        </ion-item-divider>
        <ion-item class="ion-text-wrap" *ngFor="let cert of certificates" [href]="cert.downloadurl" target="_blank">
            <ion-icon name="trophy" slot="start" aria-hidden="true"></ion-icon>
            <ion-label>
                <h3>{{cert.name}}</h3>
            </ion-label>
            <ion-icon name="download" slot="end" aria-hidden="true"></ion-icon>
        </ion-item>
        <ion-item *ngIf="certificates.length === 0">
            <ion-label>
                <p>{{ 'addon.block_recentlyaccesseditems.nocertificates' | translate }}</p>
            </ion-label>
        </ion-item>

        <!-- Course Progress Section -->
        <ion-item-divider>
            <ion-label>
                <h2 class="section-title">{{ 'addon.block_recentlyaccesseditems.courseprogress' | translate }}</h2>
            </ion-label>
        </ion-item-divider>
        <ion-item class="ion-text-wrap" *ngFor="let courseItem of courseProgress">
            <ion-icon *ngIf="courseItem.progress === 100" name="checkmark-circle" color="success" slot="start"
                aria-hidden="true"></ion-icon>
            <ion-label>
                <h3>{{courseItem.courseName}}</h3>
                <div class="progress-container">
                    <ion-progress-bar [value]="courseItem.progress / 100" color="primary"></ion-progress-bar>
                    <p class="progress-text">{{courseItem.completedActivities}} of {{courseItem.totalActivities}} activities completed ({{courseItem.progress}}%)</p>
                </div>
                <!-- Certificate Link (optional) -->
                <ion-item *ngIf="courseItem.certificateUrl" [href]="courseItem.certificateUrl" target="_blank">
                    <ion-icon name="document" slot="start" aria-hidden="true"></ion-icon>
                    <ion-label>{{ 'addon.block_recentlyaccesseditems.viewcertificates' | translate }}</ion-label>
                </ion-item>
            </ion-label>
        </ion-item>

        <!-- Personal Achievements Section -->
        <ion-item-divider>
            <ion-label>
                <h2 class="section-title">{{ 'addon.block_recentlyaccesseditems.recentachievements' | translate }}</h2>
            </ion-label>
        </ion-item-divider>
        <ion-item class="ion-text-wrap" *ngFor="let achievementItem of achievements">
            <ion-icon [name]="achievementItem.icon" slot="start" aria-hidden="true"></ion-icon>
            <ion-label>
                <h3>{{achievementItem.title}}</h3>
                <p>{{achievementItem.description}}</p>
                <p class="achievement-date">{{achievementItem.date | date:'medium'}}</p>
            </ion-label>
        </ion-item>
    </core-loading>
</ion-card>