<ion-card>
    <core-loading [hideUntil]="loaded">
        <!-- Badges Section -->
        <ion-item-divider>
            <ion-label>
                <h2 class="section-title">{{ 'addon.block_recentlyaccesseditems.viewbadges' | translate }}</h2>
            </ion-label>
        </ion-item-divider>
        <ion-item class="ion-text-wrap" *ngFor="let badge of badges">
            <ion-avatar slot="start">
                <img [src]="badge.badgeurl" [alt]="badge.name" core-external-content>
            </ion-avatar>
            <ion-label>
                <h3>{{badge.name}}</h3>
                <p>{{badge.dateissued | coreFormatDate }}</p>
            </ion-label>
        </ion-item>
        <ion-item *ngIf="badges.length === 0">
            <ion-label>
                <p>{{ 'addon.block_recentlyaccesseditems.nobadges' | translate }}</p>
            </ion-label>
        </ion-item>

        <!-- Certificates Section -->
        <ion-item-divider>
            <ion-label>
                <h2 class="section-title">{{ 'addon.block_recentlyaccesseditems.certificates' | translate }}</h2>
            </ion-label>
        </ion-item-divider>
        <ion-item class="ion-text-wrap" *ngFor="let cert of certificates" [href]="cert.downloadurl" target="_blank">
            <ion-icon name="document" slot="start" aria-hidden="true"></ion-icon>
            <ion-label>
                <h3>{{cert.name}}</h3>
                <p>{{cert.timecreated | coreFormatDate }}</p>
            </ion-label>
            <ion-button slot="end" fill="clear">
                <ion-icon name="download" slot="icon-only" aria-hidden="true"></ion-icon>
            </ion-button>
        </ion-item>
        <ion-item *ngIf="certificates.length === 0">
            <ion-label>
                <p>{{ 'addon.block_recentlyaccesseditems.nocertificates' | translate }}</p>
            </ion-label>
        </ion-item>

        <!-- Course Progress Section -->
        <ion-item-divider>
            <ion-label>
                <h2 class="section-title">{{ 'addon.block_recentlyaccesseditems.progress' | translate }}</h2>
            </ion-label>
        </ion-item-divider>
        <ion-item class="ion-text-wrap" *ngFor="let course of courseProgress">
            <ion-label>
                <h3>{{course.courseName}}</h3>
                <div class="progress-container">
                    <ion-progress-bar [value]="course.progress/100" color="primary"></ion-progress-bar>
                    <p class="progress-text">{{ 'addon.block_recentlyaccesseditems.progresssummary' | translate: { 
                        completed: course.completedActivities, 
                        total: course.totalActivities 
                    } }}</p>
                </div>
            </ion-label>
            <ion-icon *ngIf="course.progress === 100" 
                     name="checkmark-circle" 
                     color="success" 
                     slot="end" 
                     aria-hidden="true">
            </ion-icon>
        </ion-item>

        <!-- Achievements Section -->
        <ion-item-divider>
            <ion-label>
                <h2 class="section-title">{{ 'addon.block_recentlyaccesseditems.achievements' | translate }}</h2>
            </ion-label>
        </ion-item-divider>
        <ion-item class="ion-text-wrap" *ngFor="let achievement of achievements">
            <ion-icon [name]="achievement.icon" slot="start" aria-hidden="true"></ion-icon>
            <ion-label>
                <h3>{{achievement.title}}</h3>
                <p>{{achievement.description}}</p>
                <p class="achievement-date">{{achievement.date | coreFormatDate }}</p>
            </ion-label>
        </ion-item>
        <ion-item *ngIf="achievements.length === 0">
            <ion-label>
                <p>{{ 'addon.block_recentlyaccesseditems.noachievements' | translate }}</p>
            </ion-label>
        </ion-item>
    </core-loading>
</ion-card>